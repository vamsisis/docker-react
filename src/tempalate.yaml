{{ define "CustomerBody" }}{{ if gt (len .Alerts.Firing) 0 }}**Firing**
{{ template "__text_alert_list.copy" .Alerts.Firing }}{{ if gt (len .Alerts.Resolved) 0 }}
{{ end }}{{ end }}{{ if gt (len .Alerts.Resolved) 0 }}**Resolved**
{{ template "__text_alert_list.copy" .Alerts.Resolved }}{{ end }}{{ end }}
{{ define "__text_alert_list.copy" }}{{ range . }}
Value: {{ template "__text_values_list.copy" . }}
Labels:
{{ range .Labels.SortedPairs }} - {{ .Name }} = {{ .Value }}
{{ end }}
Annotations:
{{ range .Annotations.SortedPairs }} - {{ .Name }} = {{ .Value }}
{{ end }}
{{ end }}{{ end }}
{{ define "__text_values_list.copy" }}{{ if len .Values }}{{ $first := true }}{{ range $refID, $value := .Values -}}
{{ if $first }}{{ $first = false }}{{ else }}, {{ end }}
{{ if eq $refID "B" }}B [Current Value] = {{ $value }}{{ else if eq $refID "C" }}C [Threshold Cross] = {{ $value }}{{ else }}{{ $refID }} = {{ $value }}{{ end }}
{{ end -}}
{{ else }}[no value]{{ end }}{{ end }}


===========================================================================

{{ define "loadbalancer" }}{{ .CommonLabels.alertname }}{{ end }}


=======================================================================

{{ define "custom_title" -}}
{{ if gt (.Alerts.Firing | len) 0 }}ðŸš¨ {{ .Alerts.Firing | len }} firing alert(s): {{ range .Alerts.Firing }}{{ .Labels.alertname }} on {{ .Labels.LoadBalancer }}{{ break }}{{ end }}. {{ end }}
{{ if gt (.Alerts.Resolved | len) 0 }}âœ… {{ .Alerts.Resolved | len }} resolved alert(s): {{ range .Alerts.Resolved }}{{ .Labels.alertname }} on {{ .Labels.LoadBalancer }}{{ break }}{{ end }}. {{ end }}
{{ end -}}
======================================================
{{ define "custom_title" -}}
{{ if gt (len .Alerts.Firing) 0 }}ðŸš¨ Firing alert(s): {{ .CommonLabels.alertname }}{{ end }}
{{ if gt (len .Alerts.Resolved) 0 }}âœ… Resolved alert(s): {{ .CommonLabels.alertname }}{{ end }}
{{ end -}}

=================================
{{ define "custom_title" }}{{ if gt (len .Alerts.Firing) 0 }}ðŸš¨ Firing alert(s): {{ .CommonLabels.alertname }}{{ else if gt (len .Alerts.Resolved) 0 }}âœ… Resolved alert(s): {{ .CommonLabels.alertname }}{{ end }}{{ end }}
