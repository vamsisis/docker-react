{{- define "email.message_alert" -}}
Alert:
- Name: {{ index .Labels "alertname" }}
- Load Balancer: {{ index .Labels "loadbalancer" }}
- Threshold: {{ index .Values "threshold" }}
{{- end -}}

{{ define "email.message" }}
There are {{ len .Alerts.Firing }} firing alerts, and {{ len .Alerts.Resolved }} resolved alerts

{{ if .Alerts.Firing -}}
Firing alerts:
{{- range .Alerts.Firing }}
{{ template "email.message_alert" . }}
{{- end }}
{{- end }}

{{ if .Alerts.Resolved -}}
Resolved alerts:
{{- range .Alerts.Resolved }}
{{ template "email.message_alert" . }}
{{- end }}
{{- end }}
{{ end }}
